<!DOCTYPE html>
<!-- 
==============================================================================
健康度量管理系統 - 登入頁面
==============================================================================

系統描述：
健康管理系統的前端登入介面，提供用戶身份驗證和密碼管理功能

功能特色：
1. 用戶登入驗證
2. 首次登入密碼更新
3. 角色分流（醫護人員/病患）
4. 自動跳轉管理
5. 響應式設計

技術架構：
- HTML5：語義化結構設計
- CSS3：現代化視覺樣式
- JavaScript：前端互動邏輯
- jQuery：DOM 操作和 AJAX 請求
- PHP：後端身份驗證服務

安全特性：
- 密碼強度要求
- 表單驗證
- 會話管理
- 防護XSS攻擊

開發資訊：
團隊：Team 021
日期：2024/09/22
版本：1.0
==============================================================================
-->
<html lang="zh-TW">
<head>
    <!-- =============================================================
         文件頭部設定 (Document Head Configuration)
         基本元數據和外部資源載入
         ============================================================= -->
    
    <!-- 字符編碼：支援中文顯示 -->
    <meta charset="UTF-8">
    
    <!-- 響應式設計：確保在各種裝置正確顯示 -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <!-- 頁面標題：顯示在瀏覽器標籤頁 -->
    <title>健康度量管理系統</title>
    
    <!-- 外部樣式表：視覺設計和佈局 -->
    <link rel="stylesheet" href="team021.css">
    
    <!-- jQuery 函式庫：簡化 DOM 操作和 AJAX 請求 -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
</head>
<body>
    <!-- =============================================================
         主要應用程式容器 (Main Application Container)
         包含所有功能模組和介面元素
         ============================================================= -->
    <div class="container">
        <!-- 
            系統標題區域 (System Header)
            功能：顯示系統名稱和用戶資訊
            包含：系統標題、用戶名稱、登出按鈕
        -->
        <header class="header">
            <!-- 系統主標題 -->
            <h1>健康度量管理系統</h1>
            
            <!-- 
                用戶資訊區域 (User Info Area)
                顯示條件：用戶登入後顯示
                功能：顯示當前用戶名稱和提供登出功能
                初始狀態：隱藏（style="display: none;"）
            -->
            <div class="user-info" id="userInfo" style="display: none;">
                <!-- 用戶名稱顯示：由 JavaScript 動態填入 -->
                <span id="userName"></span>
                <!-- 登出按鈕：觸發登出程序 -->
                <button id="logoutBtn" class="btn btn-outline">登出</button>
            </div>
        </header>

        <!-- 
            登入介面面板 (Login Interface Panel)
            功能：提供用戶身份驗證介面
            包含：帳號密碼輸入、登入按鈕、錯誤訊息顯示
            顯示控制：由 JavaScript 控制顯示/隱藏
        -->
        <div id="loginPanel" class="panel">
            <div class="login-form">
                <!-- 登入表單標題 -->
                <h2>系統登入</h2>
                
                <!-- 
                    登入表單 (Login Form)
                    id="loginForm"：JavaScript 事件綁定目標
                    提交處理：由 JavaScript 攔截並處理
                -->
                <form id="loginForm">
                    <!-- 
                        帳號輸入群組 (Account Input Group)
                        required 屬性：HTML5 表單驗證
                    -->
                    <div class="form-group">
                        <label for="account">帳號：</label>
                        <input type="text" id="account" name="account" required>
                    </div>
                    
                    <!-- 
                        密碼輸入群組 (Password Input Group)
                        type="password"：隱藏輸入內容
                    -->
                    <div class="form-group">
                        <label for="password">密碼：</label>
                        <input type="password" id="password" name="password" required>
                    </div>
                    
                    <!-- 
                        登入按鈕 (Login Button)
                        type="submit"：觸發表單提交事件
                        class="btn btn-primary"：主要操作按鈕樣式
                    -->
                    <button type="submit" class="btn btn-primary">登入</button>
                </form>
                
                <!-- 
                    登入訊息顯示區域 (Login Message Area)
                    功能：顯示登入成功/失敗訊息
                    內容：由 JavaScript 動態更新
                -->
                <div id="loginMessage" class="message"></div>
            </div>
        </div>

        <!-- 
            密碼變更介面面板 (Password Change Interface Panel)
            功能：首次登入時強制更新密碼
            顯示條件：初始密碼用戶首次登入後顯示
            初始狀態：隱藏（style="display: none;"）
        -->
        <div id="changePasswordPanel" class="panel" style="display: none;">
            <div class="password-form">
                <!-- 密碼變更標題和說明 -->
                <h2>首次登入 - 請更新密碼</h2>
                <p class="info">密碼規範：英文字大小寫與數字混合之 12 碼字串</p>
                
                <!-- 
                    密碼變更表單 (Password Change Form)
                    id="changePasswordForm"：JavaScript 事件綁定
                -->
                <form id="changePasswordForm">
                    <!-- 
                        目前密碼輸入群組 (Current Password Input)
                        用途：驗證用戶身份
                    -->
                    <div class="form-group">
                        <label for="currentPassword">目前密碼：</label>
                        <input type="password" id="currentPassword" name="current_password" required>
                    </div>
                    
                    <!-- 
                        新密碼輸入群組 (New Password Input)
                        規範：12碼英數混合密碼
                        pattern 屬性：前端密碼格式驗證
                    -->
                    <div class="form-group">
                        <label for="newPassword">新密碼：</label>
                        <input type="password" id="newPassword" name="new_password" required>
                    </div>
                    
                    <!-- 
                        確認密碼輸入群組 (Confirm Password Input)
                        功能：防止密碼輸入錯誤
                        驗證：JavaScript 會檢查兩次密碼輸入是否一致
                    -->
                    <div class="form-group">
                        <label for="confirmPassword">確認新密碼：</label>
                        <input type="password" id="confirmPassword" name="confirm_password" required>
                    </div>
                    
                    <!-- 密碼更新按鈕：觸發密碼變更程序 -->
                    <button type="submit" class="btn btn-primary">更新密碼</button>
                </form>
                
                <!-- 密碼變更訊息顯示區域：成功/失敗訊息 -->
                <div id="passwordMessage" class="message"></div>
            </div>
        </div>

        <!-- 
            醫檢員管理介面面板 (Technician Management Interface Panel)
            功能：醫檢員的完整管理系統
            包含：人員管理、醫檢項目管理、檢查結果管理
            角色權限：僅醫檢員可訪問
            初始狀態：隱藏（style="display: none;"）
        -->
        <div id="technicianPanel" class="panel" style="display: none;">
            <!-- 
                管理功能分頁標籤 (Admin Tabs)
                功能：切換不同管理功能
                設計：分頁式介面，提升使用者體驗
            -->
            <div class="admin-tabs">
                <!-- 
                    人員管理分頁標籤
                    data-tab="users"：JavaScript 分頁切換識別
                    class="active"：預設啟用狀態
                -->
                <button class="tab-btn active" data-tab="users">人員管理</button>
                
                <!-- 醫檢項目管理分頁標籤 -->
                <button class="tab-btn" data-tab="items">醫檢項目</button>
                
                <!-- 檢查結果管理分頁標籤 -->
                <button class="tab-btn" data-tab="results">檢查結果</button>
            </div>

            <!-- 
                人員管理分頁內容 (Users Management Tab Content)
                功能：管理系統中的所有用戶（醫檢員和病患）
                包含：新增用戶、編輯用戶資訊、刪除用戶
            -->
            <div id="usersTab" class="tab-content active">
                <!-- 
                    區段標題區域 (Section Header)
                    包含：功能標題和主要操作按鈕
                -->
                <div class="section-header">
                    <h3>人員管理</h3>
                    <!-- 新增人員按鈕：觸發新增用戶對話框 -->
                    <button id="addUserBtn" class="btn btn-primary">新增人員</button>
                </div>
                
                <!-- 
                    資料表格容器 (Table Container)
                    功能：顯示所有用戶資訊列表
                    設計：響應式表格設計
                -->
                <div class="table-container">
                    <!-- 
                        用戶資料表格 (Users Data Table)
                        id="usersTable"：JavaScript 操作目標
                        class="data-table"：統一的表格樣式
                    -->
                    <table id="usersTable" class="data-table">
                        <!-- 
                            表格標題行 (Table Header)
                            定義：各欄位的標題和結構
                        -->
                        <thead>
                            <tr>
                                <th>編號</th>
                                <th>類型</th>
                                <th>姓名</th>
                                <th>帳號</th>
                                <th>首次登入</th>
                                <th>建立時間</th>
                                <th>操作</th>
                            </tr>
                        </thead>
                        <tbody></tbody>
                    </table>
                </div>
            </div>

            <!-- 醫檢項目管理 -->
            <div id="itemsTab" class="tab-content">
                <div class="section-header">
                    <h3>醫檢項目管理</h3>
                    <button id="addItemBtn" class="btn btn-primary">新增項目</button>
                </div>
                <div class="table-container">
                    <table id="itemsTable" class="data-table">
                        <thead>
                            <tr>
                                <th>項目編號</th>
                                <th>項目名稱</th>
                                <th>描述</th>
                                <th>分數範圍</th>
                                <th>操作</th>
                            </tr>
                        </thead>
                        <tbody></tbody>
                    </table>
                </div>
            </div>

            <!-- 檢查結果管理 -->
            <div id="resultsTab" class="tab-content">
                <div class="section-header">
                    <h3>檢查結果管理</h3>
                    <button id="addResultBtn" class="btn btn-primary">新增結果</button>
                </div>
                <div class="table-container">
                    <table id="resultsTable" class="data-table">
                        <thead>
                            <tr>
                                <th>受檢者</th>
                                <th>檢查項目</th>
                                <th>分數</th>
                                <th>檢查日期</th>
                                <th>負責醫檢員</th>
                                <th>備註</th>
                                <th>操作</th>
                            </tr>
                        </thead>
                        <tbody></tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- 受檢者查看介面 -->
        <div id="patientPanel" class="panel" style="display: none;">
            <div class="patient-header">
                <h3>個人健康度量報告</h3>
                <div id="healthSummary" class="health-summary"></div>
            </div>
            <div class="table-container">
                <table id="patientResultsTable" class="data-table">
                    <thead>
                        <tr>
                            <th>檢查項目</th>
                            <th>度量分數</th>
                            <th>檢查日期</th>
                            <th>負責醫檢員</th>
                            <th>備註</th>
                        </tr>
                    </thead>
                    <tbody></tbody>
                </table>
            </div>
        </div>
    </div>

    <!-- 模態對話框 -->
    <div id="modal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <div id="modalBody"></div>
        </div>
    </div>

    <script src="team021.js"></script>
</body>
</html>